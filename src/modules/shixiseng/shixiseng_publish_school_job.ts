import { IList } from "@/axios/apis/types";
import { IFormat } from "../guopin/types";

// ã€æ˜ å°„ã€‘å­¦å†å­—æ®µæ˜ å°„
const EDUCATION_MAP:Record<string, string> = {
  'åšå£«': 'åšå£«',
  'ç¡•å£«': 'ç¡•å£«',
  'æœ¬ç§‘': 'æœ¬ç§‘',
  'ä¸“ç§‘': 'ä¸é™',
  'é«˜ä¸­': 'ä¸é™',
  'ä¸­ä¸“ä¸­æŠ€':'ä¸é™',
  'ä¸­ä¸“/ä¸­æŠ€':'ä¸é™',
  'åˆä¸­åŠä»¥ä¸‹':'ä¸é™',
  'ä¸é™':'ä¸é™'
}

// ã€æ˜ å°„ã€‘èŒä½ç±»å‹æ˜ å°„
const JOB_CATEGORIES_MAP:Record<string, string[]> = {
  "åœºåŠ¡/å‰§åŠ¡":["è®¾è®¡/ä¼ åª’","å½±è§†ä¼ åª’", "å½±è§†ä¼ åª’"],
  "æ¼”è‰ºäººå‘˜/ç»çºªäºº":["è®¾è®¡/ä¼ åª’","å½±è§†ä¼ åª’", "ç»çºªäºº"],
  "å½±è§†åˆ¶ä½œ":["è®¾è®¡/ä¼ åª’","å½±è§†ä¼ åª’", "åæœŸåˆ¶ä½œ"],
  "èˆç¾è®¾è®¡":["è®¾è®¡/ä¼ åª’","å½±è§†ä¼ åª’", "åæœŸåˆ¶ä½œ"],
  "å¹¿å‘Š":["è®¾è®¡/ä¼ åª’","å¹¿å‘Š", "å¹¿å‘Š"],
  "ITåŸ¹è®­":["æ•™è‚²åŸ¹è®­","èŒä¸šåŸ¹è®­", "æ‹“å±•åŸ¹è®­"],
  "æ‰è‰ºç‰¹é•¿åŸ¹è®­":["æ•™è‚²åŸ¹è®­","ç‰¹é•¿åŸ¹è®­", "ç‰¹é•¿åŸ¹è®­"],
  "æ•™åŠ¡ç®¡ç†":["æ•™è‚²åŸ¹è®­","æ•™åŠ¡è¡Œæ”¿", "æ•™åŠ¡è¡Œæ”¿"],
  "è€ƒç ”è¾…å¯¼":["æ•™è‚²åŸ¹è®­","æ•™å¸ˆ", "å…¶ä»–æ•™è‚²åŸ¹è®­èŒä½"],
  "ç•™å­¦è¾…å¯¼":["æ•™è‚²åŸ¹è®­","æ•™å¸ˆ", "å…¶ä»–æ•™è‚²åŸ¹è®­èŒä½"],
  "ç‰¹æ®Šæ•™è‚²":["æ•™è‚²åŸ¹è®­","æ•™å¸ˆ", "å…¶ä»–æ•™è‚²åŸ¹è®­èŒä½"],
  "è¯­è¨€åŸ¹è®­":["æ•™è‚²åŸ¹è®­","æ•™å¸ˆ", "å…¶ä»–æ•™è‚²åŸ¹è®­èŒä½"],
  "æ—©æ•™/å¹¼æ•™":["æ•™è‚²åŸ¹è®­","æ•™å¸ˆ", "å¹¼æ•™"],
  "èŒä¸šåŸ¹è®­":["æ•™è‚²åŸ¹è®­","èŒä¸šåŸ¹è®­", "æ‹“å±•åŸ¹è®­"],
  "ä¸­å°å­¦è¯¾ç¨‹è¾…å¯¼":["æ•™è‚²åŸ¹è®­","æ•™å¸ˆ", "å…¶ä»–æ•™è‚²åŸ¹è®­èŒä½"],
  "é«˜ç­‰æ•™è‚²":["æ•™è‚²åŸ¹è®­","æ•™å¸ˆ", "å…¶ä»–æ•™è‚²åŸ¹è®­èŒä½"],
  "ç§‘ç ”/å­¦æœ¯ç ”ç©¶":["æ•™è‚²åŸ¹è®­","æ•™å¸ˆ", "å…¶ä»–æ•™è‚²åŸ¹è®­èŒä½"],
  "ä¿é™©":["é‡‘è/æ³•åŠ¡","ä¿é™©", "ä¿é™©"],
  "æŠ•èèµ„":["é‡‘è/æ³•åŠ¡","æŠ•èèµ„", "æŠ•èèµ„"],
  "è¯åˆ¸/åŸºé‡‘/æœŸè´§":["é‡‘è/æ³•åŠ¡","è¯åˆ¸/åŸºé‡‘/æœŸè´§", "è¯åˆ¸/åŸºé‡‘/æœŸè´§åŸºé‡‘ç»ç†"],
  "ä¿¡æ‰˜/æ‹…ä¿/æ‹å–/å…¸å½“":["é‡‘è/æ³•åŠ¡","è¯åˆ¸/åŸºé‡‘/æœŸè´§", "è¯åˆ¸/åŸºé‡‘/æœŸè´§åŸºé‡‘ç»ç†"],
  "é“¶è¡ŒåŠé‡‘èæœåŠ¡":["é‡‘è/æ³•åŠ¡","é“¶è¡Œ", "é“¶è¡Œ"],
  "å†œ/æ—/ç‰§/æ¸”":["ç¯å¢ƒ/èµ„æºåˆ©ç”¨","å†œç‰§æ¸”æ—", "å†œç‰§æ¸”æ—"],
  "ç¯å¢ƒç§‘å­¦/ç¯ä¿":["ç¯å¢ƒ/èµ„æºåˆ©ç”¨","ç¯å¢ƒç§‘å­¦", "ç¯å¢ƒç§‘å­¦"],
  "èƒ½æº/çŸ¿äº§/åœ°è´¨":["ç¯å¢ƒ/èµ„æºåˆ©ç”¨","èƒ½æº/çŸ¿äº§/åœ°è´¨", "èƒ½æº/çŸ¿äº§/åœ°è´¨"],
  "é™ˆåˆ—å±•ç¤ºè®¾è®¡":["è®¾è®¡/ä¼ åª’","éè§†è§‰è®¾è®¡", "é™ˆåˆ—è®¾è®¡"],
  "åŠ¨ç”»åŠ¨æ•ˆè®¾è®¡":["è®¾è®¡/ä¼ åª’","è§†è§‰/äº¤äº’è®¾è®¡", "åŠ¨ç”»è®¾è®¡"],
  "å·¥ä¸šè®¾è®¡":["è®¾è®¡/ä¼ åª’","éè§†è§‰è®¾è®¡", "å·¥ä¸šè®¾è®¡"],
  "è§†è§‰/äº¤äº’è®¾è®¡":["è®¾è®¡/ä¼ åª’","è§†è§‰/äº¤äº’è®¾è®¡", "è§†è§‰/äº¤äº’è®¾è®¡"],
  "äº§å“ç»ç†":["äº’è”ç½‘IT","äº§å“", "äº§å“ç»ç†"],
  "é«˜çº§ç®¡ç†":["äº’è”ç½‘IT","æŠ€æœ¯ç®¡ç†", "æŠ€æœ¯ç®¡ç†"],
  "é¡¹ç›®ç®¡ç†":["äº’è”ç½‘IT","äº§å“", "äº§å“é¡¹ç›®ç®¡ç†"],
  "ç­–åˆ’":["è´¸æ˜“å•†åŠ¡","å¸‚åœº/è¥é”€", "å¸‚åœºç­–åˆ’"],
  "å‘è¡Œ":["è´¸æ˜“å•†åŠ¡","å¸‚åœº/è¥é”€", "å¸‚åœº/è¥é”€"],
  "å…¬å…³åª’ä»‹":["è´¸æ˜“å•†åŠ¡","å…¬å…³åª’ä»‹", "å…¬å…³åª’ä»‹"],
  "ä¼šå±•ä¼šåŠ¡":["è´¸æ˜“å•†åŠ¡","ä¼šåŠ¡ä¼šå±•", "ä¼šåŠ¡ä¼šå±•"],
  "å¸‚åœº/å“ç‰Œæ¨å¹¿":["è´¸æ˜“å•†åŠ¡","å“ç‰Œæ¨å¹¿", "å“ç‰Œæ¨å¹¿"],
  "å¸‚åœºè°ƒç ”":["è´¸æ˜“å•†åŠ¡","å¸‚åœº/è¥é”€", "å¸‚åœº/è¥é”€"],
  "é‡‡è´­/ä¾›åº”é“¾/ææ–™ç®¡ç†":["è´¸æ˜“å•†åŠ¡","é‡‡è´­", "é‡‡è´­"],
  "ä»“å‚¨ç®¡ç†":["è´¸æ˜“å•†åŠ¡","ä¾›åº”é“¾/ç‰©æµ", "ä»“å‚¨ç»ç†"],
  "äº¤é€šè¿è¾“":["è´¸æ˜“å•†åŠ¡","ä¾›åº”é“¾/ç‰©æµ", "ä¾›åº”é“¾/ç‰©æµ"],
  "é…é€ç†è´§":["è´¸æ˜“å•†åŠ¡","ä¾›åº”é“¾/ç‰©æµ", "ä¾›åº”é“¾/ç‰©æµ"],
  "ç‰©æµç®¡ç†":["è´¸æ˜“å•†åŠ¡","ä¾›åº”é“¾/ç‰©æµ", "ä¾›åº”é“¾/ç‰©æµ"],
  "å…³åŠ¡":["è´¸æ˜“å•†åŠ¡","è¿›å‡ºå£è´¸æ˜“", "æŠ¥å…³/æŠ¥æ£€å‘˜"],
  "è´¢åŠ¡":["äººäº‹è¡Œæ”¿è´¢åŠ¡","è´¢ä¼š", "è´¢ä¼š"],
  "æ¡£æ¡ˆç®¡ç†":["äººäº‹è¡Œæ”¿è´¢åŠ¡","è¡Œæ”¿", "è¡Œæ”¿"],
  "è¡Œæ”¿":["äººäº‹è¡Œæ”¿è´¢åŠ¡","è¡Œæ”¿", "è¡Œæ”¿"],
  "åˆè§„é£æ§/æ³•åŠ¡/å¾‹å¸ˆ":["é‡‘è/æ³•åŠ¡","æ³•åŠ¡", "æ³•åŠ¡"],
  "äººäº‹":["äººäº‹è¡Œæ”¿è´¢åŠ¡","äººåŠ›èµ„æº", "äººåŠ›èµ„æº"],
  "æ–‡å‘˜/åŠ©ç†":["äººäº‹è¡Œæ”¿è´¢åŠ¡","è¡Œæ”¿", "è¡Œæ”¿"],
  "é”€å”®é¡¾é—®":["è´¸æ˜“å•†åŠ¡","é”€å”®", "é”€å”®"],
  "å•†åŠ¡æ‹“å±•":["è´¸æ˜“å•†åŠ¡","é”€å”®", "é”€å”®"],
  "é”€å”®ç®¡ç†":["è´¸æ˜“å•†åŠ¡","é”€å”®", "é”€å”®"],
  "æµ‹è¯•å·¥ç¨‹å¸ˆ":["äº’è”ç½‘IT","æµ‹è¯•", "æµ‹è¯•"],
  "è¿ç»´æ”¯æŒ":["äº’è”ç½‘IT","è¿ç»´/æŠ€æœ¯æ”¯æŒ", "è¿ç»´/æŠ€æœ¯æ”¯æŒ"],
  "å”®å‰å”®åå·¥ç¨‹å¸ˆ":["äº’è”ç½‘IT","è¿ç»´/æŠ€æœ¯æ”¯æŒ", "è¿ç»´/æŠ€æœ¯æ”¯æŒ"],
  "ç‰©ä¸š/å®‰ä¿":["æœåŠ¡ä¸š","æœåŠ¡ä¸š", "æœåŠ¡ä¸š"],
  "é¤é¥®æœåŠ¡":["æœåŠ¡ä¸š","æœåŠ¡ä¸š", "æœåŠ¡ä¸š"],
  "é…’åº—æœåŠ¡":["æœåŠ¡ä¸š","æœåŠ¡ä¸š", "æœåŠ¡ä¸š"],
  "æ—…æ¸¸æœåŠ¡":["æœåŠ¡ä¸š","æœåŠ¡ä¸š", "æœåŠ¡ä¸š"],
  "å¥åº·/ç¾å®¹":["æœåŠ¡ä¸š","æœåŠ¡ä¸š", "æœåŠ¡ä¸š"],
  "å®¶æ”¿/ç»´ä¿®":["æœåŠ¡ä¸š","æœåŠ¡ä¸š", "æœåŠ¡ä¸š"],
  "ä¸“ä¸šæœåŠ¡":["æœåŠ¡ä¸š","æœåŠ¡ä¸š", "æœåŠ¡ä¸š"],
  "å•†åŠ¡æœåŠ¡":["æœåŠ¡ä¸š","æœåŠ¡ä¸š", "æœåŠ¡ä¸š"],
  "è¿åŠ¨å¥èº«":["æœåŠ¡ä¸š","æœåŠ¡ä¸š", "æœåŠ¡ä¸š"],
  "é›¶å”®ç™¾è´§":["æœåŠ¡ä¸š","æœåŠ¡ä¸š", "æœåŠ¡ä¸š"],
  "ç®¡åŸ¹ç”Ÿ/å‚¨å¤‡å¹²éƒ¨":["éç›ˆåˆ©/å…¶ä»–","ç®¡åŸ¹ç”Ÿ", "ç®¡åŸ¹ç”Ÿ"],
  "ç¤¾å·¥":["éç›ˆåˆ©/å…¶ä»–","å…¬å…±äº‹ä¸š", "ç¤¾å·¥"],
  "æ”¿åºœåŠéç›ˆåˆ©æœºæ„ä»ä¸šè€…":["éç›ˆåˆ©/å…¶ä»–","å…¬å…±äº‹ä¸š", "å¿—æ„¿è€…"],
  "ç”µå•†è¿è¥":["äº’è”ç½‘IT","è¿è¥", "ç”µå•†è¿è¥"],
  "æ–°åª’ä½“è¿è¥":["äº’è”ç½‘IT","è¿è¥", "æ–°åª’ä½“è¿è¥"],
  "ä¸šåŠ¡è¿è¥":["äº’è”ç½‘IT","è¿è¥", "äº§å“è¿è¥"],
  "è¿è¥ç®¡ç†":["äº’è”ç½‘IT","è¿è¥", "è¿è¥"],
  "ä¸“ä¸šåˆ†æ":["äº’è”ç½‘IT","è¿è¥", "è¿è¥"],
  "å®¢æˆ·æœåŠ¡":["äº’è”ç½‘IT","è¿è¥", "ç”¨æˆ·è¿è¥"],
  "æœºæ¢°è®¾è®¡/åˆ¶é€ ":["ç”Ÿäº§åˆ¶é€ ","æœºæ¢°è®¾è®¡/åˆ¶é€ ", "æœºæ¢°è®¾è®¡/åˆ¶é€ "],
  "æœºæ¢°è®¾å¤‡ç»´ä¿®":["ç”Ÿäº§åˆ¶é€ ","æœºæ¢°è®¾è®¡/åˆ¶é€ ", "æœºæ¢°è®¾è®¡/åˆ¶é€ "],
  "æ±½è½¦åˆ¶é€ ":["ç”Ÿäº§åˆ¶é€ ","æœºæ¢°è®¾è®¡/åˆ¶é€ ", "æœºæ¢°è®¾è®¡/åˆ¶é€ "],
  "æ±½è½¦é”€å”®ä¸æœåŠ¡":["è´¸æ˜“å•†åŠ¡","é”€å”®", "é”€å”®"],
  "æ™®å·¥/æŠ€å·¥":["ç”Ÿäº§åˆ¶é€ ","ç”Ÿäº§è¥è¿", "ç”Ÿäº§å‘˜"],
  "ç”Ÿäº§ç®¡ç†":["ç”Ÿäº§åˆ¶é€ ","ç”Ÿäº§è¥è¿", "ç”Ÿäº§å‘˜"],
  "ç”Ÿäº§è´¨é‡ç®¡ç†":["ç”Ÿäº§åˆ¶é€ ","ç”Ÿäº§è¥è¿", "ç”Ÿäº§å‘˜"],
  "æœè£…/çººç»‡/çš®é©":["ç”Ÿäº§åˆ¶é€ ","ç”Ÿäº§è¥è¿", "ç”Ÿäº§å‘˜"],
  "å°åˆ·åŒ…è£…":["ç”Ÿäº§åˆ¶é€ ","ç”Ÿäº§è¥è¿", "ç”Ÿäº§å‘˜"],
  "åŒ–å·¥":["ç”Ÿäº§åˆ¶é€ ","ç”Ÿäº§è¥è¿", "ç”Ÿäº§å‘˜"],
  "ç¼–è¾‘/ç¼–æ ¡/ä½œå®¶":["è®¾è®¡/ä¼ åª’","é‡‡ç¼–/å†™ä½œ/å‡ºç‰ˆ", "é‡‡ç¼–/å†™ä½œ/å‡ºç‰ˆ"],
  "ç¿»è¯‘":["æ•™è‚²åŸ¹è®­","ç¿»è¯‘", "ç¿»è¯‘"],
  "è®°è€…/é‡‡ç¼–":["è®¾è®¡/ä¼ åª’","é‡‡ç¼–/å†™ä½œ/å‡ºç‰ˆ", "é‡‡ç¼–/å†™ä½œ/å‡ºç‰ˆ"],
  "ç”Ÿç‰©/åŒ»è¯":["ç”Ÿç‰©åŒ»ç–—","ç”Ÿç‰©åˆ¶è¯", "ç”Ÿç‰©åˆ¶è¯"],
  "åŒ»ç–—å™¨æ¢°":["ç”Ÿç‰©åŒ»ç–—","ç”Ÿç‰©åˆ¶è¯", "ç”Ÿç‰©åˆ¶è¯"],
  "æŠ¤å£«/åŒ»åŠ©":["ç”Ÿç‰©åŒ»ç–—","æŠ¤å£«/æŠ¤ç†", "æŠ¤å£«/æŠ¤ç†"],
  "åŒ»ç”Ÿ/è¯å‰‚å¸ˆ":["ç”Ÿç‰©åŒ»ç–—","åŒ»ç”Ÿ/åŒ»æŠ€", "åŒ»ç”Ÿ/åŒ»æŠ€"],
  "åŒ»åŠ¡ç®¡ç†":["ç”Ÿç‰©åŒ»ç–—","åŒ»ç”Ÿ/åŒ»æŠ€", "åŒ»ç”Ÿ/åŒ»æŠ€"],
  "è¯åº—":["ç”Ÿç‰©åŒ»ç–—","è¯åº—", "è¯åº—"],
  "å‰ç«¯å¼€å‘":["äº’è”ç½‘IT","å‰ç«¯å¼€å‘", "å‰ç«¯å¼€å‘"],
  "äººå·¥æ™ºèƒ½":["äº’è”ç½‘IT","äººå·¥æ™ºèƒ½", "äººå·¥æ™ºèƒ½"],
  "è½¯ä»¶ç ”å‘":["äº’è”ç½‘IT","å‰ç«¯å¼€å‘", "å‰ç«¯å¼€å‘"],
  "æ•°æ®å·¥ç¨‹å¸ˆ":["äº’è”ç½‘IT","æ•°æ®", "æ•°æ®åˆ†æå¸ˆ"],
  "ç§»åŠ¨ç ”å‘":["äº’è”ç½‘IT","ç§»åŠ¨å¼€å‘", "ç§»åŠ¨å¼€å‘"],
  "é€šä¿¡åŠç¡¬ä»¶ç ”å‘":["é€šä¿¡/ç¡¬ä»¶","ç¡¬ä»¶å¼€å‘", "ç¡¬ä»¶å¼€å‘"],
  "ç”µå­/ç”µå™¨/åŠå¯¼ä½“":["é€šä¿¡/ç¡¬ä»¶","ç”µå­/åŠå¯¼ä½“", "ç”µå­/åŠå¯¼ä½“"],
  "å·¥ç¨‹å®‰å…¨/å·¥ç¨‹è´¨æ£€":["æˆ¿äº§/å»ºç­‘","è®¾è®¡è£…ä¿®ä¸å¸‚æ”¿å»ºè®¾", "å»ºç­‘å·¥ç¨‹å¸ˆ"],
  "å·¥ç¨‹ç®¡ç†":["æˆ¿äº§/å»ºç­‘","è®¾è®¡è£…ä¿®ä¸å¸‚æ”¿å»ºè®¾", "å»ºç­‘å·¥ç¨‹å¸ˆ"],
  "å·¥ç¨‹å¼€å‘æŠ€æœ¯äººå‘˜":["æˆ¿äº§/å»ºç­‘","è®¾è®¡è£…ä¿®ä¸å¸‚æ”¿å»ºè®¾", "å»ºç­‘å·¥ç¨‹å¸ˆ"],
  "æ–½å·¥å‘˜":["æˆ¿äº§/å»ºç­‘","è®¾è®¡è£…ä¿®ä¸å¸‚æ”¿å»ºè®¾", "æ–½å·¥å‘˜"],
  "æˆ¿åœ°äº§è§„åˆ’å¼€å‘":["æˆ¿äº§/å»ºç­‘","æˆ¿åœ°äº§è§„åˆ’å¼€å‘", "æˆ¿åœ°äº§è§„åˆ’å¼€å‘"],
  "æˆ¿åœ°äº§äº¤æ˜“":["","æˆ¿åœ°äº§é”€å”®/æ‹›å•†", "æˆ¿åœ°äº§é”€å”®/æ‹›å•†"],
  "å»ºç­‘/å®¤å†…è®¾è®¡":["è®¾è®¡/ä¼ åª’","éè§†è§‰è®¾è®¡", "å®¤å†…è®¾è®¡"],
}

// æ ¼å¼åŒ–æ•°æ®
function formateData(job: IList){
  return {
    title: `${job.title}(${job.code})`, // èŒä½å
    code: job.code, // èŒä½ç¼–å·
    // type: JOB_TYPE_MAP[job.recruitmentTypeName], // æ‹›è˜ç±»å‹
    salaryFrom: job.salaryFrom, // æœ€ä½è–ªèµ„
    salaryTo: job.salaryTo, // æœ€é«˜è–ªèµ„
    amount: 5, // åœ¨æ‹›äººæ•°
    salmonths: job.salaryTimes + 'ä¸ªæœˆ', // è–ªèµ„æœˆæ•°
    description: job.description, // èŒä½æè¿°
    category: JOB_CATEGORIES_MAP[job.secondCategory.name], // èŒä½ç±»åˆ«
    // city: Object.keys(CITY_MAP).includes(city) ? CITY_MAP[city] : ['å…¶ä»–åœ°åŒº', 'å…¨å›½'], // å·¥ä½œåœ°åŒº
    education: EDUCATION_MAP[job.educationFrom], // å­¦å†
    specialized: ['å…¶ä»–', 'ä¸é™'], // ä¸“ä¸š
    experienceFrom: job.experienceFrom, // å·¥ä½œå¹´é™
  }
}

/**
 * åŠŸèƒ½ï¼šé€šè¿‡ xPath è·å– dom å…ƒç´ 
 * @param xpath 
 * @returns 
 */
 const getxPath = (xpath:string) => {
  var result = document.evaluate(xpath, document, null, XPathResult.ANY_TYPE, null);
  const dom: Node | null = result.iterateNext();
  if(dom){
    return dom;
  }else{
    return null;
  }
}

// è·å– jobs
const getJobs = (type: string) => {
  return new Promise((resolve, reject)=>{
    try {
      chrome.storage.local.get(type, (result) => {
        console.log('ğŸ‘Œ Get Job Successï½', result, type)
        resolve(result[type]);
      });
    } catch (error) {
      reject(error);
    }
  })
}

// è‡ªåŠ¨åŒ¹é…èŒä½
function autoSetJob(data: IFormat){
  console.log(data);
  const timeId = setInterval(() => {
    // èŒä½åç§°
    const titleELe = getxPath('//*[@id="app"]/div[1]/div/div[3]/div/div[1]/form/div[1]/div/div/div/div/div/input')
    if(titleELe){
      clearInterval(timeId);
      if(titleELe){
        $(titleELe).val(data.title);
        titleELe.dispatchEvent(new CustomEvent('input'))
      }

      // èŒä½ç±»åˆ«
      const categoryEle = getxPath('//*[@id="app"]/div[1]/div/div[3]/div/div[1]/form/div[2]/div/div/div/input');
      categoryEle && $(categoryEle).trigger('click')
      setTimeout(async () => {
        $.each($('.fist-item'), (index, ele) => {
          if ($(ele).text() === data.category[0]) {
            $(ele).trigger('click');
          }
        })
        await new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve('ok');
          }, 1000)
        });
        $.each($('.second-item'), (index, ele) => {
          if ($(ele).text() === data.category[1]) {
            $(ele).trigger('click');
          }
        })
        await new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve('ok');
          }, 1000)
        });
        $.each($('.last-level span'), (index, ele) => {
          if ($(ele).text() === data.category[2]) {
            $(ele).trigger('click');
          }
        })
      }, 1000)

      // å­¦å†è¦æ±‚
      $.each($('.el-select-dropdown__item'), (index, ele) => {
        if($(ele).text() === data.education) {
          $(ele).trigger('click');
        }
      })

      // è®¾ç½®å²—ä½
      const jobDescEle = getxPath('//*[@id="app"]/div[1]/div/div[3]/div/div[1]/form/div[4]/div/div/div/textarea');
      if(jobDescEle){
        $(jobDescEle).val(data.description);
        jobDescEle.dispatchEvent(new CustomEvent('input'))
      }
      
      // èŒä½äº®ç‚¹
      const tagsTimeId = setInterval(() => {
        if($('.recommend-tags').length > 0){
          clearInterval(tagsTimeId)
          $.each($('.recommend-tags'), (index, ele) => {
            if([1,2,3].includes(index)){
              $(ele).trigger('click')
            }
          })
        }
      }, 1000);

      // åœ°ç‚¹
      const addressTimeId = setInterval(() => {
        const adressEle = $('.job-address__item');
        if(adressEle){
          clearInterval(addressTimeId);
          $(adressEle).trigger('click');
        }
      }, 1000);

      // æ—¥è–ªèŒƒå›´
      $.each($('.el-select-dropdown__item'), (index, ele) => {
        if($(ele).text() === data.salaryFrom){
          console.error($(ele).text())
          $(ele).trigger('click');
        }
        // if($(ele).text() === data.salaryTo){
        //   $(ele).trigger('click');
        // }
      });

      // æ‹›è˜äººæ•°
      const countEle = getxPath('//*[@id="app"]/div[1]/div/div[3]/div/div[1]/form/div[9]/div/div/div/input')
      if(countEle){
        $(countEle).val(data.amount);
        countEle.dispatchEvent(new CustomEvent('input'))
      }
    }
  }, 1000)
}

const singleJobPublish = async () => {
  const job = await getJobs('job') as IList;
  const formate = formateData(job) as any;
  autoSetJob(formate);
}

async function init(){
  singleJobPublish();
}

init();